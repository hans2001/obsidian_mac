2025-08-15 11:02

Link:  https://leetcode.com/contest/weekly-contest-461/problems/minimum-time-to-activate-string/

Problem: 
You are given a string s of length n and an integer array order, where order is a permutation of the numbers in the range [0, n - 1].

Starting from time t = 0, replace the character at index order[t] in s with '*' at each time step.

A substring is valid if it contains at least one '*'.
A string is active if the total number of valid substrings is greater than or equal to k.
Return the minimum time t at which the string s becomes active. If it is impossible, return -1.

Constraints:

1 <= n == s.length <= 105
order.length == n
0 <= order[i] <= n - 1
s consists of lowercase English letters.
order is a permutation of integers from 0 to n - 1.
1 <= k <= 109

Intuition:
compute when arr to get under time t, what are the position that has a star? so as we traverse the string with star, we can compute the substring with star with a bit of math, 
- `last_star` = index of the most recent `'*'` before or at `i`
- `last_star + 1` = number of possible start positions (0 through `last_star`)  
    → each of these start positions gives a substring ending at `i` that contains a `'*'`

Solution:
```python
class Solution:
    def minTime(self, s: str, order: List[int], k: int) -> int:
        n = len(s)
        total_substrings = n * (n + 1) // 2
        if k > total_substrings:
            return -1
        when = [0] * n
        for t, pos in enumerate(order):
            when[pos] = t
        def active(t: int) -> bool:
            last_star = -1
            cnt = 0
            for i in range(n):
                if when[i] <= t:          # s[i] is '*' by time t
                    last_star = i
                if last_star != -1:
                    cnt += last_star + 1
                    if cnt >= k:          # early exit
                        return True
            return cnt >= k
        lo,hi = 0, n-1
        ans = -1
        while lo <= hi: 
            md = (lo + hi) // 2
            if active( md ) : 
                ans = md
                hi = md - 1 
            else: 
                lo = md + 1
        return ans
            ©leetcode
```

Tags: #binary_search #fenwick_tree

RL: ****

Considerations:
